(()=>{var a={};a.id=788,a.ids=[788],a.modules={846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2055:(a,e,n)=>{"use strict";n.r(e),n.d(e,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>k});var t={};n.r(t),n.d(t,{POST:()=>l});var r=n(6559),s=n(8088),i=n(7719),o=n(2190);let u=new(n(7449)).ij(process.env.GEMINI_API_KEY||"");async function l(a){try{let{level:e,numQuestions:n,testMode:t}=await a.json();if(!e||!["N5","N4","N3","N2","N1"].includes(e)||!t)return o.NextResponse.json({error:"Level atau Mode Tes tidak valid."},{status:400});let r=Math.min(Math.max(Number(n),1),20),s=u.getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{responseMimeType:"application/json"}}),i=function(a,e,n){let t="";switch(n){case"particle":t=`Buat soal tes untuk mengisi partikel yang rumpang, ditandai dengan (___). Pilihan jawaban harus berisi 4 partikel (misal: は, が, を, に, で, と, も), di mana salah satunya adalah jawaban yang benar. Jelaskan fungsi partikel yang benar dalam konteks kalimat tersebut.`;break;case"jp-id":t="Buat soal tes menerjemahkan kalimat atau frasa dari Bahasa Jepang ke Bahasa Indonesia. Pilihan jawaban harus berisi 4 opsi terjemahan dalam Bahasa Indonesia.";break;case"id-ja":t="Buat soal tes menerjemahkan kalimat atau frasa dari Bahasa Indonesia ke Bahasa Jepang. Pilihan jawaban harus berisi 4 opsi terjemahan dalam Bahasa Jepang.";break;case"kanji-reading":t="Buat soal tes untuk menebak cara baca sebuah kata Kanji. Berikan kalimat dan tandai satu kata Kanji. Pertanyaannya adalah tentang cara bacanya. Pilihan jawaban harus berisi 4 opsi cara baca dalam Hiragana.";break;case"kanji-meaning":t="Buat soal tes untuk menebak arti sebuah kata Kanji. Berikan kalimat dan tandai satu kata Kanji. Pertanyaannya adalah tentang artinya. Pilihan jawaban harus berisi 4 opsi arti dalam Bahasa Indonesia.";break;default:t="Buat soal tes tentang pola kalimat (bunpo). Berikan kalimat dengan bagian pola kalimat yang rumpang (___). Pilihan jawaban harus berisi 4 opsi kelanjutan yang melengkapi pola kalimat tersebut secara gramatikal."}return`
    Buat sebuah tes JLPT level ${a} sebanyak ${e} soal dengan tipe "${n}".
    ${t}
    
    Untuk setiap soal, berikan dalam format JSON yang valid dengan struktur berikut: "question", "options" (sebuah array dengan 4 string pilihan), "correctAnswer" (string jawaban yang benar persis seperti di dalam options), dan "explanation" (penjelasan detail dalam Bahasa Indonesia mengapa jawaban tersebut benar).
    Pastikan pilihan jawaban yang salah (distractors) masuk akal dan sering menjadi jebakan umum.
    Format output harus sebuah array JSON dari objek-objek soal.
  `}(e,r,t);console.log(`Generating test with mode: ${t}, level: ${e}`);let l=(await s.generateContent(i)).response.text(),p=JSON.parse(l);return o.NextResponse.json(p)}catch(a){return console.error("Gemini Test Generation Error:",a),o.NextResponse.json({error:"Gagal men-generate soal tes dari AI."},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/test/generate/route",pathname:"/api/test/generate",filename:"route",bundlePath:"app/api/test/generate/route"},resolvedPagePath:"C:\\Users\\Carlos\\Desktop\\language\\bahasa-jepang-2.0\\app\\api\\test\\generate\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:d,workUnitAsyncStorage:k,serverHooks:g}=p;function m(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:k})}},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var e=require("../../../../webpack-runtime.js");e.C(a);var n=a=>e(e.s=a),t=e.X(0,[447,580,449],()=>n(2055));module.exports=t})();